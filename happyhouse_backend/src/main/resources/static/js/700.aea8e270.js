"use strict";(self["webpackChunkfinal_project_vue"]=self["webpackChunkfinal_project_vue"]||[]).push([[700],{2763:function(a,e,t){t.r(e),t.d(e,{default:function(){return v}});var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{cols:"12",md:"12"}},[t("div",{attrs:{id:"map"}},[t("v-btn",{attrs:{id:"btnRoadView"},on:{click:a.showRoadView}},[a._v("로드뷰")]),t("div",{attrs:{id:"roadView"}})],1),t("v-row",[t("v-checkbox",{staticClass:"mr-2",attrs:{label:"교통정보 보기"},on:{click:a.setOverlayMapTypeId},model:{value:a.chkTraffic,callback:function(e){a.chkTraffic=e},expression:"chkTraffic"}},[a._v("교통정보 보기")]),t("v-checkbox",{staticClass:"mr-2",attrs:{label:"자전거도로 정보 보기"},on:{click:a.setOverlayMapTypeId},model:{value:a.chkBicycle,callback:function(e){a.chkBicycle=e},expression:"chkBicycle"}}),t("v-checkbox",{staticClass:"mr-2",attrs:{label:"지형 정보 보기"},on:{click:a.setOverlayMapTypeId},model:{value:a.chkTerrain,callback:function(e){a.chkTerrain=e},expression:"chkTerrain"}})],1)],1)},s=[],r=t(629);const n="houseStore";var o={name:"MapList",data:()=>({markers:[],infowindow:null,terrain:null,traffic:null,bicycle:null,useDistrict:null,chkTraffic:!1,chkBicycle:!1,chkTerrain:!1,marker:null,curlat:0,curlng:0,roadView:!1,rvContainer:null,rv:null,rvClient:null,rvMarker:null,map:null}),props:{house:null},created(){navigator.geolocation.getCurrentPosition((a=>{this.curlat=a.coords.latitude,this.curlng=a.coords.longitude}))},computed:{...(0,r.rn)(n,["houses"])},watch:{houses:function(){this.displayMarkers(this.houses)}},mounted(){if(window.kakao&&window.kakao.maps)this.initMap();else{const a=document.createElement("script");a.onload=()=>kakao.maps.load(this.initMap),a.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=915cffed372954b7b44804ed422b9cf0",document.head.appendChild(a)}setTimeout((()=>{navigator.geolocation.getCurrentPosition((a=>{this.curlat=a.coords.latitude,this.curlng=a.coords.longitude;let e=new kakao.maps.LatLng(this.curlat,this.curlng);this.displayMarker(e),this.displayMarkers(this.houses)})),this.terrain=kakao.maps.MapTypeId.TERRAIN,this.traffic=kakao.maps.MapTypeId.TRAFFIC,this.bicycle=kakao.maps.MapTypeId.BICYCLE,this.useDistrict=kakao.maps.MapTypeId.USE_DISTRICT}),500)},methods:{...(0,r.nv)(n,["detailHouse"]),initMap(){const a=document.getElementById("map"),e={center:new kakao.maps.LatLng(this.curlat,this.curlng),level:5};this.map=new kakao.maps.Map(a,e);var t=new kakao.maps.MapTypeControl;this.map.addControl(t,kakao.maps.ControlPosition.TOPRIGHT);var i=new kakao.maps.ZoomControl;this.map.addControl(i,kakao.maps.ControlPosition.RIGHT)},changeSize(a,e){const t=document.getElementById("map");t.style.width=`${a}px`,t.style.height=`${e}px`,this.map.relayout()},displayMarker(a){const e=t(6101),i=new kakao.maps.Size(40,40),s=new kakao.maps.MarkerImage(e,i);this.marker=new kakao.maps.Marker({map:this.map,position:a,image:s});var r=new kakao.maps.InfoWindow({content:'<div style="padding: 10px;text-align: center;width:150px;"><h5>현재 위치</h5></div>'});r.open(this.map,this.marker),this.map.setCenter(a)},displayMarkers(a){this.markers.length>0&&this.markers.forEach((a=>a.setMap(null))),this.markers=[];const e=a.map((a=>new kakao.maps.LatLng(a.lat,a.lng))),t=a.map((a=>({position:new kakao.maps.LatLng(a.lat,a.lng),content:`<div style="padding: 10px;text-align:center;width: 150px"><h5>${a.aptName}</h5></div>`,house:a})));for(var i=0;i<t.length;i++){var s=new kakao.maps.Marker({map:this.map,position:t[i].position}),r=new kakao.maps.InfoWindow({content:t[i].content});kakao.maps.event.addListener(s,"mouseover",this.makeOverListener(this.map,s,r)),kakao.maps.event.addListener(s,"mouseout",this.makeOutListener(r)),kakao.maps.event.addListener(s,"click",this.moveToDetail(t[i].house)),this.markers.push(s)}if(e.length>0){const a=e.reduce(((a,e)=>a.extend(e)),new kakao.maps.LatLngBounds);this.map.setBounds(a)}},makeOverListener(a,e,t){return function(){t.open(a,e)}},makeOutListener(a){return function(){a.close()}},moveToDetail(a){var e=this;return function(){e.detailHouse(a),"/map/detail"!==e.$route.path&&e.$router.push("/map/detail")}},setOverlayMapTypeId(){this.map.removeOverlayMapTypeId(this.traffic),this.map.removeOverlayMapTypeId(this.bicycle),this.map.removeOverlayMapTypeId(this.terrain),this.chkTraffic&&this.map.addOverlayMapTypeId(this.traffic),this.chkBicycle&&this.map.addOverlayMapTypeId(this.bicycle),this.chkTerrain&&this.map.addOverlayMapTypeId(this.terrain)},showRoadView(){if(this.roadView)this.roadView=!this.roadView,this.rvMarker.setMap(null),this.map.removeOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW),this.rvContainer.style.display="none";else{this.roadView=!this.roadView,this.map.addOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW),this.rvContainer=document.getElementById("roadView"),this.rv=new kakao.maps.Roadview(this.rvContainer),this.rvClient=new kakao.maps.RoadviewClient,this.rvContainer.style.display="none",this.rvContainer.style.height="0",this.rvContainer.style.right="0",this.map.relayout();var a=new kakao.maps.MarkerImage("https://t1.daumcdn.net/localimg/localimages/07/2018/pc/roadview_minimap_wk_2018.png",new kakao.maps.Size(26,46),{spriteSize:new kakao.maps.Size(1666,168),spriteOrigin:new kakao.maps.Point(705,114),offset:new kakao.maps.Point(13,46)});this.rvMarker=new kakao.maps.Marker({image:a,position:this.map.getCenter(),draggable:!0,map:this.map});var e=this;kakao.maps.event.addListener(this.rvMarker,"dragend",(function(){var a=e.rvMarker.getPosition();e.toggleRoadview(a)})),kakao.maps.event.addListener(this.map,"click",(function(a){var t=a.latLng;e.rvMarker.setPosition(t),e.toggleRoadview(t)}))}},toggleRoadview(a){var e=this;this.rvClient.getNearestPanoId(a,50,(function(t){null===t?(e.rvContainer.style.display="none",e.rvContainer.style.height="0%",e.map.relayout()):(e.map.relayout(),e.rvContainer.style.display="block",e.rvContainer.style.height="50%",e.rvContainer.style.right="0",e.rv.setPanoId(t,a),e.rv.relayout())}))}}},l=o,p=t(1001),c=t(3453),h=t.n(c),k=t(680),d=t(8393),m=t(2877),u=(0,p.Z)(l,i,s,!1,null,"1bfc1810",null),v=u.exports;h()(u,{VBtn:k.Z,VCheckbox:d.Z,VRow:m.Z})}}]);
//# sourceMappingURL=700.aea8e270.js.map