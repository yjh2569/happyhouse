"use strict";(self["webpackChunkfinal_project_vue"]=self["webpackChunkfinal_project_vue"]||[]).push([[700],{72763:function(a,e,t){t.r(e),t.d(e,{default:function(){return f}});var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{cols:"12",md:"12"}},[t("div",{attrs:{id:"map"}},[t("v-btn",{attrs:{id:"btnRoadView"},on:{click:a.showRoadView}},[a._v("로드뷰")]),t("div",{attrs:{id:"roadView"}})],1),t("v-row",[t("v-checkbox",{staticClass:"mr-2",attrs:{label:"교통정보 보기"},on:{click:a.setOverlayMapTypeId},model:{value:a.chkTraffic,callback:function(e){a.chkTraffic=e},expression:"chkTraffic"}},[a._v("교통정보 보기")]),t("v-checkbox",{staticClass:"mr-2",attrs:{label:"자전거도로 정보 보기"},on:{click:a.setOverlayMapTypeId},model:{value:a.chkBicycle,callback:function(e){a.chkBicycle=e},expression:"chkBicycle"}}),t("v-checkbox",{staticClass:"mr-2",attrs:{label:"지형 정보 보기"},on:{click:a.setOverlayMapTypeId},model:{value:a.chkTerrain,callback:function(e){a.chkTerrain=e},expression:"chkTerrain"}})],1)],1)},n=[],r=t(4367),o=(t(21249),t(41539),t(54747),t(20629)),s="houseStore",l={name:"MapList",data:function(){return{markers:[],infowindow:null,terrain:null,traffic:null,bicycle:null,useDistrict:null,chkTraffic:!1,chkBicycle:!1,chkTerrain:!1,marker:null,curlat:0,curlng:0,roadView:!1,rvContainer:null,rv:null,rvClient:null,rvMarker:null,map:null}},props:{house:null},created:function(){var a=this;navigator.geolocation.getCurrentPosition((function(e){a.curlat=e.coords.latitude,a.curlng=e.coords.longitude}))},computed:(0,r.Z)({},(0,o.rn)(s,["houses"])),watch:{houses:function(){this.displayMarkers(this.houses)}},mounted:function(){var a=this;if(window.kakao&&window.kakao.maps)this.initMap();else{var e=document.createElement("script");e.onload=function(){return kakao.maps.load(a.initMap)},e.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=915cffed372954b7b44804ed422b9cf0",document.head.appendChild(e)}setTimeout((function(){navigator.geolocation.getCurrentPosition((function(e){a.curlat=e.coords.latitude,a.curlng=e.coords.longitude;var t=new kakao.maps.LatLng(a.curlat,a.curlng);a.displayMarker(t),a.displayMarkers(a.houses)})),a.terrain=kakao.maps.MapTypeId.TERRAIN,a.traffic=kakao.maps.MapTypeId.TRAFFIC,a.bicycle=kakao.maps.MapTypeId.BICYCLE,a.useDistrict=kakao.maps.MapTypeId.USE_DISTRICT}),500)},methods:(0,r.Z)((0,r.Z)({},(0,o.nv)(s,["detailHouse"])),{},{initMap:function(){var a=document.getElementById("map"),e={center:new kakao.maps.LatLng(this.curlat,this.curlng),level:5};this.map=new kakao.maps.Map(a,e);var t=new kakao.maps.MapTypeControl;this.map.addControl(t,kakao.maps.ControlPosition.TOPRIGHT);var i=new kakao.maps.ZoomControl;this.map.addControl(i,kakao.maps.ControlPosition.RIGHT)},changeSize:function(a,e){var t=document.getElementById("map");t.style.width="".concat(a,"px"),t.style.height="".concat(e,"px"),this.map.relayout()},displayMarker:function(a){var e=t(36101),i=new kakao.maps.Size(40,40),n=new kakao.maps.MarkerImage(e,i);this.marker=new kakao.maps.Marker({map:this.map,position:a,image:n});var r=new kakao.maps.InfoWindow({content:'<div style="padding: 10px;text-align: center;width:150px;"><h5>현재 위치</h5></div>'});r.open(this.map,this.marker),this.map.setCenter(a)},displayMarkers:function(a){this.markers.length>0&&this.markers.forEach((function(a){return a.setMap(null)})),this.markers=[];for(var e=a.map((function(a){return new kakao.maps.LatLng(a.lat,a.lng)})),t=a.map((function(a){return{position:new kakao.maps.LatLng(a.lat,a.lng),content:'<div style="padding: 10px;text-align:center;width: 150px"><h5>'.concat(a.aptName,"</h5></div>"),house:a}})),i=0;i<t.length;i++){var n=new kakao.maps.Marker({map:this.map,position:t[i].position}),r=new kakao.maps.InfoWindow({content:t[i].content});kakao.maps.event.addListener(n,"mouseover",this.makeOverListener(this.map,n,r)),kakao.maps.event.addListener(n,"mouseout",this.makeOutListener(r)),kakao.maps.event.addListener(n,"click",this.moveToDetail(t[i].house)),this.markers.push(n)}if(e.length>0){var o=e.reduce((function(a,e){return a.extend(e)}),new kakao.maps.LatLngBounds);this.map.setBounds(o)}},makeOverListener:function(a,e,t){return function(){t.open(a,e)}},makeOutListener:function(a){return function(){a.close()}},moveToDetail:function(a){var e=this;return function(){e.detailHouse(a),"/map/detail"!==e.$route.path&&e.$router.push("/map/detail")}},setOverlayMapTypeId:function(){this.map.removeOverlayMapTypeId(this.traffic),this.map.removeOverlayMapTypeId(this.bicycle),this.map.removeOverlayMapTypeId(this.terrain),this.chkTraffic&&this.map.addOverlayMapTypeId(this.traffic),this.chkBicycle&&this.map.addOverlayMapTypeId(this.bicycle),this.chkTerrain&&this.map.addOverlayMapTypeId(this.terrain)},showRoadView:function(){if(this.roadView)this.roadView=!this.roadView,this.rvMarker.setMap(null),this.map.removeOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW),this.rvContainer.style.display="none";else{this.roadView=!this.roadView,this.map.addOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW),this.rvContainer=document.getElementById("roadView"),this.rv=new kakao.maps.Roadview(this.rvContainer),this.rvClient=new kakao.maps.RoadviewClient,this.rvContainer.style.display="none",this.rvContainer.style.height="0",this.rvContainer.style.right="0",this.map.relayout();var a=new kakao.maps.MarkerImage("https://t1.daumcdn.net/localimg/localimages/07/2018/pc/roadview_minimap_wk_2018.png",new kakao.maps.Size(26,46),{spriteSize:new kakao.maps.Size(1666,168),spriteOrigin:new kakao.maps.Point(705,114),offset:new kakao.maps.Point(13,46)});this.rvMarker=new kakao.maps.Marker({image:a,position:this.map.getCenter(),draggable:!0,map:this.map});var e=this;kakao.maps.event.addListener(this.rvMarker,"dragend",(function(){var a=e.rvMarker.getPosition();e.toggleRoadview(a)})),kakao.maps.event.addListener(this.map,"click",(function(a){var t=a.latLng;e.rvMarker.setPosition(t),e.toggleRoadview(t)}))}},toggleRoadview:function(a){var e=this;this.rvClient.getNearestPanoId(a,50,(function(t){null===t?(e.rvContainer.style.display="none",e.rvContainer.style.height="0%",e.map.relayout()):(e.map.relayout(),e.rvContainer.style.display="block",e.rvContainer.style.height="50%",e.rvContainer.style.right="0",e.rv.setPanoId(t,a),e.rv.relayout())}))}})},p=l,c=t(1001),k=t(43453),d=t.n(k),h=t(680),m=t(78393),u=t(62877),v=(0,c.Z)(p,i,n,!1,null,"1bfc1810",null),f=v.exports;d()(v,{VBtn:h.Z,VCheckbox:m.Z,VRow:u.Z})}}]);
//# sourceMappingURL=700-legacy.65d5ab93.js.map