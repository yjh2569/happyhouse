"use strict";(self["webpackChunkfinal_project_vue"]=self["webpackChunkfinal_project_vue"]||[]).push([[208],{3498:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{cols:"12",ms:"12"}},[t("v-row",{attrs:{id:"map"}},[t("v-btn",{attrs:{id:"btnRoadView"},on:{click:e.showRoadView}},[e._v("로드뷰")]),t("div",{attrs:{id:"roadView"}}),t("div",{staticClass:"category"},[t("ul",[t("li",{attrs:{id:"allMenu"},on:{click:function(a){return e.changeMarker("all")}}},[t("span",{staticClass:"ico_comm ico_coffee"}),e._v(" 전체보기 ")]),t("li",{attrs:{id:"coffeeMenu"},on:{click:function(a){return e.changeMarker("coffee")}}},[t("span",{staticClass:"ico_comm ico_coffee"}),e._v(" 커피숍 ")]),t("li",{attrs:{id:"restaurantMenu"},on:{click:function(a){return e.changeMarker("restaurant")}}},[t("span",{staticClass:"ico_comm2"}),e._v(" 음식점 ")]),t("li",{attrs:{id:"storeMenu"},on:{click:function(a){return e.changeMarker("store")}}},[t("span",{staticClass:"ico_comm ico_store"}),e._v(" 편의점 ")]),t("li",{attrs:{id:"carparkMenu"},on:{click:function(a){return e.changeMarker("carpark")}}},[t("span",{staticClass:"ico_comm ico_carpark"}),e._v(" 주차장 ")])])])],1),t("v-row",[t("v-checkbox",{staticClass:"mr-2",attrs:{label:"교통정보 보기"},on:{click:e.setOverlayMapTypeId},model:{value:e.chkTraffic,callback:function(a){e.chkTraffic=a},expression:"chkTraffic"}},[e._v("교통정보 보기")]),t("v-checkbox",{staticClass:"mr-2",attrs:{label:"자전거도로 정보 보기"},on:{click:e.setOverlayMapTypeId},model:{value:e.chkBicycle,callback:function(a){e.chkBicycle=a},expression:"chkBicycle"}}),t("v-checkbox",{staticClass:"mr-2",attrs:{label:"지형 정보 보기"},on:{click:e.setOverlayMapTypeId},model:{value:e.chkTerrain,callback:function(a){e.chkTerrain=a},expression:"chkTerrain"}})],1)],1)},r=[],i=t(629);const n="houseStore";var o={name:"SmapList",data:()=>({markers:[],infowindow:null,marker:null,curlat:0,curlng:0,roadView:!1,rvContainer:null,rv:null,rvClient:null,rvMarker:null,map:null,terrain:null,traffic:null,bicycle:null,chkTraffic:!1,chkBicycle:!1,chkTerrain:!1,markerImageSrc:"",coffeeMarkers:[],storeMarkers:[],carparkMarkers:[],coffeePositions:[],storePositions:[],carparkPositions:[],resMarkers:[],resPositions:[]}),props:{house:null},created(){navigator.geolocation.getCurrentPosition((e=>{this.curlat=e.coords.latitude,this.curlng=e.coords.longitude}))},computed:{...(0,i.rn)(n,["stores"])},watch:{stores:function(){this.displayMarkers(this.stores)}},mounted(){if(window.kakao&&window.kakao.maps)this.initMap();else{const e=document.createElement("script");e.onload=()=>kakao.maps.load(this.initMap),e.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=915cffed372954b7b44804ed422b9cf0",document.head.appendChild(e)}setTimeout((()=>{navigator.geolocation.getCurrentPosition((e=>{this.curlat=e.coords.latitude,this.curlng=e.coords.longitude;let a=new kakao.maps.LatLng(this.curlat,this.curlng);this.displayMarker(a),this.displayMarkers(this.stores)})),this.markerImageSrc="https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/category.png",this.terrain=kakao.maps.MapTypeId.TERRAIN,this.traffic=kakao.maps.MapTypeId.TRAFFIC,this.bicycle=kakao.maps.MapTypeId.BICYCLE,this.useDistrict=kakao.maps.MapTypeId.USE_DISTRICT}),500)},methods:{...(0,i.nv)(n,["detailStore"]),initMap(){const e=document.getElementById("map"),a={center:new kakao.maps.LatLng(this.curlat,this.curlng),level:5};this.map=new kakao.maps.Map(e,a);var t=new kakao.maps.MapTypeControl;this.map.addControl(t,kakao.maps.ControlPosition.TOPRIGHT);var s=new kakao.maps.ZoomControl;this.map.addControl(s,kakao.maps.ControlPosition.RIGHT)},changeSize(e,a){const t=document.getElementById("map");t.style.width=`${e}px`,t.style.height=`${a}px`,this.map.relayout()},displayMarker(e){const a=t(6101),s=new kakao.maps.Size(40,40),r=new kakao.maps.MarkerImage(a,s);this.marker=new kakao.maps.Marker({map:this.map,position:e,image:r});var i=new kakao.maps.InfoWindow({content:'<div style="padding: 10px;text-align: center;width:150px;"><h5>현재 위치</h5></div>'});i.open(this.map,this.marker),this.map.setCenter(e)},displayMarkers(e){this.markers.length>0&&this.markers.forEach((e=>e.setMap(null))),this.coffeePositions=[],this.storePositions=[],this.carparkPositions=[],this.resPositions=[],this.markers=[],this.coffeeMarkers=[],this.carparkMarkers=[],this.storeMarkers=[],this.resMarkers=[];const a=e.map((e=>new kakao.maps.LatLng(e.lat,e.lng)));var t=0,s=0,r=0,i=0;e.map((e=>{"커피전문점/카페/다방"===e.type&&(this.coffeePositions[t++]=new kakao.maps.LatLng(e.lat,e.lng)),"주차장운영"===e.type&&(this.carparkPositions[s++]=new kakao.maps.LatLng(e.lat,e.lng)),"편의점"===e.type&&(this.storePositions[r++]=new kakao.maps.LatLng(e.lat,e.lng)),"후라이드/양념치킨"!==e.type&&"한식/백반/한정식"!==e.type&&"피자전문"!==e.type&&"중국음식/중국집"!==e.type&&"족발/보쌈전문"!==e.type&&"우동전문점"!==e.type&&"국수/만두/칼국수"!==e.type&&"냉면집"!==e.type&&"라면김밥분식"!==e.type&&"호프/맥주"!==e.type||(this.resPositions[i++]=new kakao.maps.LatLng(e.lat,e.lng))})),this.createCoffeeMarkers(),this.createStoreMarkers(),this.createCarparkMarkers(),this.createResMarkers(),this.changeMarker("all");const n=e.map((e=>({position:new kakao.maps.LatLng(e.lat,e.lng),content:`<div style="padding: 10px;text-align:center;width: 150px"><h5>${e.sname}</h5></div>`,store:e})));for(var o=0;o<n.length;o++){var l=new kakao.maps.Marker({map:this.map,position:n[o].position}),k=new kakao.maps.InfoWindow({content:n[o].content});kakao.maps.event.addListener(l,"mouseover",this.makeOverListener(this.map,l,k)),kakao.maps.event.addListener(l,"mouseout",this.makeOutListener(k)),kakao.maps.event.addListener(l,"click",this.moveToDetail(n[o].store)),this.markers.push(l)}if(a.length>0){const e=a.reduce(((e,a)=>e.extend(a)),new kakao.maps.LatLngBounds);this.map.setBounds(e)}},makeOverListener(e,a,t){return function(){t.open(e,a)}},makeOutListener(e){return function(){e.close()}},moveToDetail(e){var a=this;return function(){a.detailStore(e),"/store/sdetail"!==a.$route.path&&a.$router.push("/store/sdetail")}},displayInfoWindow(){if(this.infowindow&&this.infowindow.getMap())this.map.setCenter(this.infowindow.getPosition());else{var e='<div style="padding:5px;">Hello World!</div>',a=new kakao.maps.LatLng(33.450701,126.570667),t=!0;this.infowindow=new kakao.maps.InfoWindow({map:this.map,position:a,content:e,removable:t}),this.map.setCenter(a)}},showRoadView(){if(this.roadView)this.roadView=!this.roadView,this.rvMarker.setMap(null),this.map.removeOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW),this.rvContainer.style.display="none";else{this.roadView=!this.roadView,this.map.addOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW),this.rvContainer=document.getElementById("roadView"),this.rv=new kakao.maps.Roadview(this.rvContainer),this.rvClient=new kakao.maps.RoadviewClient,this.rvContainer.style.display="none",this.rvContainer.style.height="0",this.rvContainer.style.right="0",this.map.relayout();var e=new kakao.maps.MarkerImage("https://t1.daumcdn.net/localimg/localimages/07/2018/pc/roadview_minimap_wk_2018.png",new kakao.maps.Size(26,46),{spriteSize:new kakao.maps.Size(1666,168),spriteOrigin:new kakao.maps.Point(705,114),offset:new kakao.maps.Point(13,46)});this.rvMarker=new kakao.maps.Marker({image:e,position:this.map.getCenter(),draggable:!0,map:this.map});var a=this;kakao.maps.event.addListener(this.rvMarker,"dragend",(function(){var e=a.rvMarker.getPosition();a.toggleRoadview(e)})),kakao.maps.event.addListener(this.map,"click",(function(e){var t=e.latLng;a.rvMarker.setPosition(t),a.toggleRoadview(t)}))}},toggleRoadview(e){var a=this;this.rvClient.getNearestPanoId(e,50,(function(t){null===t?(a.rvContainer.style.display="none",a.rvContainer.style.height="0%",a.map.relayout()):(a.map.relayout(),a.rvContainer.style.display="block",a.rvContainer.style.height="50%",a.rvContainer.style.right="0",a.rv.setPanoId(t,e),a.rv.relayout())}))},setOverlayMapTypeId(){this.map.removeOverlayMapTypeId(this.traffic),this.map.removeOverlayMapTypeId(this.bicycle),this.map.removeOverlayMapTypeId(this.terrain),this.chkTraffic&&this.map.addOverlayMapTypeId(this.traffic),this.chkBicycle&&this.map.addOverlayMapTypeId(this.bicycle),this.chkTerrain&&this.map.addOverlayMapTypeId(this.terrain)},createMarkerImage(e,a,t){var s=new kakao.maps.MarkerImage(e,a,t);return s},createMarker(e,a){var t=new kakao.maps.Marker({position:e,image:a});return t},createCoffeeMarkers(){for(var e=0;e<this.coffeePositions.length;e++){var a=new kakao.maps.Size(22,26),t={spriteOrigin:new kakao.maps.Point(10,0),spriteSize:new kakao.maps.Size(36,98)},s=this.createMarkerImage(this.markerImageSrc,a,t),r=this.createMarker(this.coffeePositions[e],s);this.coffeeMarkers.push(r)}},setCoffeeMarkers(e){for(var a=0;a<this.coffeeMarkers.length;a++)this.coffeeMarkers[a].setMap(e)},createStoreMarkers(){for(var e=0;e<this.storePositions.length;e++){var a=new kakao.maps.Size(22,26),t={spriteOrigin:new kakao.maps.Point(10,36),spriteSize:new kakao.maps.Size(36,98)},s=this.createMarkerImage(this.markerImageSrc,a,t),r=this.createMarker(this.storePositions[e],s);this.storeMarkers.push(r)}},setStoreMarkers(e){for(var a=0;a<this.storeMarkers.length;a++)this.storeMarkers[a].setMap(e)},createCarparkMarkers(){for(var e=0;e<this.carparkPositions.length;e++){var a=new kakao.maps.Size(22,26),t={spriteOrigin:new kakao.maps.Point(10,72),spriteSize:new kakao.maps.Size(36,98)},s=this.createMarkerImage(this.markerImageSrc,a,t),r=this.createMarker(this.carparkPositions[e],s);this.carparkMarkers.push(r)}},setCarparkMarkers(e){for(var a=0;a<this.carparkMarkers.length;a++)this.carparkMarkers[a].setMap(e)},createResMarkers(){for(var e=0;e<this.resPositions.length;e++){var a=new kakao.maps.Size(30,30),s=this.createMarkerImage(t(4281),a),r=this.createMarker(this.resPositions[e],s);this.resMarkers.push(r)}},setResMarkers(e){for(var a=0;a<this.resMarkers.length;a++)this.resMarkers[a].setMap(e)},changeMarker(e){var a=document.getElementById("allMenu"),t=document.getElementById("coffeeMenu"),s=document.getElementById("storeMenu"),r=document.getElementById("carparkMenu"),i=document.getElementById("restaurantMenu");if(this.markers.length>0&&this.markers.forEach((e=>e.setMap(null))),this.markers=[],"coffee"===e)a.className="",t.className="menu_selected",s.className="",r.className="",i.className="",this.setCoffeeMarkers(this.map),this.setStoreMarkers(null),this.setCarparkMarkers(null),this.setResMarkers(null);else if("store"===e)a.className="",t.className="",s.className="menu_selected",r.className="",i.className="",this.setCoffeeMarkers(null),this.setStoreMarkers(this.map),this.setCarparkMarkers(null),this.setResMarkers(null);else if("carpark"===e)a.className="",t.className="",s.className="",r.className="menu_selected",i.className="",this.setCoffeeMarkers(null),this.setStoreMarkers(null),this.setCarparkMarkers(this.map),this.setResMarkers(null);else if("restaurant"===e)a.className="",t.className="",s.className="",r.className="",i.className="menu_selected",this.setCoffeeMarkers(null),this.setStoreMarkers(null),this.setCarparkMarkers(null),this.setResMarkers(this.map);else if("all"===e){a.className="menu_selected",t.className="",s.className="",r.className="",i.className="";const e=this.stores.map((e=>new kakao.maps.LatLng(e.lat,e.lng))),k=this.stores.map((e=>({position:new kakao.maps.LatLng(e.lat,e.lng),content:`<div style="padding: 10px;text-align:center;width: 150px"><h5>${e.sname}</h5></div>`,store:e})));for(var n=0;n<k.length;n++){var o=new kakao.maps.Marker({map:this.map,position:k[n].position}),l=new kakao.maps.InfoWindow({content:k[n].content});kakao.maps.event.addListener(o,"mouseover",this.makeOverListener(this.map,o,l)),kakao.maps.event.addListener(o,"mouseout",this.makeOutListener(l)),kakao.maps.event.addListener(o,"click",this.moveToDetail(k[n].store)),this.markers.push(o)}if(e.length>0){const a=e.reduce(((e,a)=>e.extend(a)),new kakao.maps.LatLngBounds);this.map.setBounds(a)}this.setCoffeeMarkers(null),this.setStoreMarkers(null),this.setCarparkMarkers(null),this.setResMarkers(null)}}}},l=o,k=t(1001),c=t(3453),p=t.n(c),h=t(680),m=t(8393),d=t(2877),u=(0,k.Z)(l,s,r,!1,null,"38de9542",null),v=u.exports;p()(u,{VBtn:h.Z,VCheckbox:m.Z,VRow:d.Z})},4281:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAa0lEQVQ4y2NgoBf4D4TYaAjwZNjM8IJYDYwMc8G8/8RqKIcqJ1rDC1I1/B8oDc+QJCDwGX4NSzE0LMWvQYbhFYryV0ARvBoYGKQYFkId9gzIkkLxHVYNIOAAlnDACA6SNIBA/agGumqgBQAAFm2rJ8jkF4kAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=208.1c92ae11.js.map